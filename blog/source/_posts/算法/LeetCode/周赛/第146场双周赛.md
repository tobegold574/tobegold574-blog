---
title: ç¬¬146åœºåŒå‘¨èµ›
date: 2024-12-23 14:26:45
tags:
    - å‘¨èµ›
    - leetcode
mathjax: true
---
[ğŸš€ç«èµ›](https://leetcode.cn/contest/biweekly-contest-146/)


## ç»Ÿè®¡ç¬¦åˆæ¡ä»¶é•¿åº¦ä¸º3çš„å­æ•°ç»„æ•°ç›®
### åšé¢˜è¿‡ç¨‹
æ»‘åŠ¨çª—å£å³å¯ã€‚

### ç®—æ³•æ¦‚è¿°
æœ¬é¢˜è¦æ±‚ä¸ºæ±‚å¤šå°‘ä¸ªå­æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªæ•°ä¹‹å’Œä¸ºç¬¬äºŒä¸ªæ•°çš„ä¸€åŠã€‚ ***æ»‘åŠ¨çª—å£*** ç§’äº†ã€‚
- æ—¶é—´å¤æ‚åº¦ä¸ºO(n)
- ç©ºé—´å¤æ‚åº¦ä¸ºO(1)

### JAVA
```java
class Solution {
    public int countSubarrays(int[] nums) {
        int l=0,r=2;
        int ans=0;
        while(r<nums.length){
            // è¦è½¬æ¢æˆæµ®ç‚¹æ•°ï¼Œä¸ç„¶åˆ¤æ–­å¥‡æ•°æˆ–è€…0ã€1ä¼šæœ‰é—®é¢˜
            if((float)nums[l]+nums[r]==(float)nums[(l+r)/2]/2) ans++;
            l++;
            r++;
        }
        return ans;
    }
}
```

### æ€»ç»“
è¦è½¬æ¢ä¸ºæµ®ç‚¹æ•°é¿å…å¥‡æ•°é™¤æ³•åªå–æ•´çš„é—®é¢˜ã€‚


## ç»Ÿè®¡å¼‚æˆ–å€¼ä¸ºç»™å®šå€¼çš„è·¯å¾„æ•°ç›®
### åšé¢˜è¿‡ç¨‹
ä½¿ç”¨äº†æ·±åº¦ä¼˜å…ˆæœç´¢éå†æ‰€æœ‰è·¯å¾„ï¼Œä½¿ç”¨äº†å“ˆå¸Œè¡¨è¿›è¡Œè®°å¿†åŒ–æœç´¢å‰ªæä¼˜åŒ–ï¼Œä½†æ˜¯æ—¶é—´è¿˜æ˜¯è¶…äº†ã€‚å› ä¸ºå“ˆå¸Œé›†åˆçš„æŸ¥æ‰¾å¼€é”€è¿˜æ˜¯é«˜ï¼Œå³ä½¿æ˜¯å¸¸æ•°ï¼ˆæ¯•ç«Ÿæ˜¯hashğŸ¥”ï¼‰ã€‚
### ç®—æ³•æ¦‚è¿°
æœ¬é¢˜è¦æ±‚ä½è·¯å¾„ä¸Šæ‰€æœ‰å€¼çš„å¼‚æˆ–å€¼å¿…é¡»ä¸ºç»™å®šå€¼ï¼Œç»Ÿè®¡ç¬¦åˆè¦æ±‚çš„è·¯å¾„æ•°ã€‚é‡‡ç”¨çµç¥çš„è§£æ³•ï¼Œç”¨ ***åŠ¨æ€è§„åˆ’*** æ›¿ä»£æ•£åˆ—é›†ã€‚
- æ—¶é—´å¤æ‚åº¦ä¸ºO(m\*n\*u)ï¼šuæ˜¯æœ€å¤§çš„å¼‚æˆ–å€¼èŒƒå›´ï¼Œæœ€åæƒ…å†µä¸‹èŒƒå›´å†…æ¯ä¸ªå¼‚æˆ–å€¼éƒ½å¯èƒ½å‡ºç°
- ç©ºé—´å¤æ‚åº¦ä¸ºO(m\*n\*u)ï¼šdpæ•°ç»„

### JAVA
```java
class Solution {
    private static final int MOD = 1_000_000_007;

    public int countPathsWithXorValue(int[][] grid, int k) {
        int mx = 0;
        for (int[] row : grid) {
            for (int val : row) {
                mx = Math.max(mx, val);
            }
        }
        // è®¡ç®—å¼‚æˆ–å€¼èŒƒå›´
        int u = 1 << (32 - Integer.numberOfLeadingZeros(mx));
        // å¦‚æœKæ¯”æœ€å¤§çš„å¼‚æˆ–å€¼è¿˜è¦å¤§ï¼Œé‚£å°±æ²¡æœ‰è·¯å¾„
        if (k >= u) {
            return 0;
        }
    
        int m = grid.length;
        int n = grid[0].length;
        // è®°å¿†åŒ–æœç´¢(dpæ•°ç»„)
        int[][][] memo = new int[m][n][u];
        for (int[][] mat : memo) {
            for (int[] row : mat) {
                Arrays.fill(row, -1);
            }
        }
        // é€†å‘æœç´¢
        return dfs(grid, m - 1, n - 1, k, memo);
    }

    private int dfs(int[][] grid, int i, int j, int x, int[][][] memo) {
        // è¶Šæ²¡è¶Šç•Œ
        if (i < 0 || j < 0) {
            return 0;
        }
        int val = grid[i][j];
        // å›åˆ°èµ·ç‚¹äº†
        if (i == 0 && j == 0) {
            return x == val ? 1 : 0;
        }
        // æˆ‘åŸæ¥ç”¨çš„æ˜¯å“ˆå¸Œé›†åˆ
        if (memo[i][j][x] != -1) {
            return memo[i][j][x];
        }
        // ç§»åŠ¨
        int left = dfs(grid, i, j - 1, x ^ val, memo);
        int up = dfs(grid, i - 1, j, x ^ val, memo);
        // è®¡ç®—å¼‚æˆ–å€¼ï¼ˆé€†åºéœ€è¦è¿™æ ·æ”¾ï¼‰
        return memo[i][j][x] = (left + up) % MOD;
    }
}
```

#### é‡è¦å®ä¾‹æ–¹æ³•åŠå±æ€§(JAVA)
- `Integer.numberOfLeadingZeros(mx)`ï¼šè®¡ç®—å‰å¯¼0çš„æ•°é‡
- `<<1`ï¼šç”Ÿæˆä¸€ä¸ª2çš„å¹‚æ¬¡æ–¹çš„æ•°å­—
- `int u = 1 << (32 - Integer.numberOfLeadingZeros(mx));`ï¼šè®¡ç®—å¼‚æˆ–å€¼çš„æœ€å¤§èŒƒå›´

### æ€»ç»“
**é‡è¦ğŸ˜ ** ï¼š
- å“ˆå¸Œé›†åˆçš„å¸¸æ•°æ—¶é—´ **ä¸å¦‚** è®°å¿†åŒ–æœç´¢ï¼
- é€†åºæœç´¢æ›´æ˜“äºå¤„ç†è¾¹ç•Œï¼Œåœ¨å…¶ä»–ç±»å‹çš„é¢˜ç›®ä¸­(e.g., ç¬¦åˆæ¡ä»¶çš„è·¯å¾„)è¿˜èƒ½å‰ªæ
- ç”¨ **è¦æ±‚æ¡ä»¶çš„æœ€å¤§å€¼** ä½œä¸ºå¤šç»´åŠ¨æ€è§„åˆ’çš„ **ç¬¬ä¸‰ç»´** ï¼


## åˆ¤æ–­ç½‘æ ¼å›¾èƒ½å¦è¢«åˆ‡å‰²æˆå—
### ç®—æ³•æ¦‚è¿°
æœ¬é¢˜è¦æ±‚ä¸ºåœ¨åªèƒ½æ¨ªç€ä¸”ä¸¤åˆ€æˆ–è€…ç«–ç€åˆ‡ä¸¤åˆ€çš„æƒ…å†µä¸‹ï¼Œèƒ½ä¸èƒ½ä½¿å›¾ä¸­çš„çŸ©å½¢åªå±äºä¸€ä¸ªåˆ†åŒºã€‚å¯ä»¥è½¬æ¢ä¸ºâ€œåˆå¹¶åŒºé—´â€é—®é¢˜ï¼Œå‚è€ƒçµç¥è§£æ³•ã€‚
- æ—¶é—´å¤æ‚åº¦ä¸ºO(mlogm)ï¼šæ’åº
- ç©ºé—´å¤æ‚åº¦ä¸ºO(m)

### JAVA
```java
class Solution {
    boolean checkValidCuts(int n, int[][] rectangles) {
        int m = rectangles.length;
        // æŠŠå››ä¸ªç‚¹é™ç»´ä¸ºä¸¤ä¸ªåŒºé—´ä¸Šçš„ç«¯ç‚¹
        int[][] a = new int[m][2];
        int[][] b = new int[m][2];
        // é•¿æ”¾ä¸€èµ·ï¼Œå®½æ”¾ä¸€èµ·
        for (int i = 0; i < m; i++) {
            int[] rect = rectangles[i];
            a[i][0] = rect[0];
            a[i][1] = rect[2];
            b[i][0] = rect[1];
            b[i][1] = rect[3];
        }
        // æ¨ªç€åˆ‡å°±æ¯”é•¿ï¼Œç«–ç€åˆ‡å°±æ¯”å®½ï¼Œä¸€ç§åˆ‡æ³•è¡Œå°±è¡Œ
        return check(a) || check(b);
    }

    private boolean check(int[][] intervals) {
        // å‡åºæ’åº
        Arrays.sort(intervals, (a, b) -> a[0] - b[0]);
        // èƒ½åˆ†æˆå‡ å— 
        int cnt = 0;
        // è®°å½•åˆ†å‰²çš„æŒ‡é’ˆ
        int maxR = 0;

        for (int[] interval : intervals) {
            // maxRæ˜¯è·Ÿä¸‹è¾¹ç•Œæ¥æ¯”çš„
            if (interval[0] >= maxR) { 
                cnt++;
            }
            // maxRæ˜¯è·Ÿä¸Šè¾¹ç•Œæ¥æ›´æ–°çš„
            maxR = Math.max(maxR, interval[1]);
        }
        // å› ä¸ºå°±åˆ‡ä¸¤åˆ€ï¼Œæ‰€ä»¥åªèƒ½åˆ†ä¸‰å—
        return cnt >= 3;
    }
}
```

### æ€»ç»“
æ—©è¯´ä¸åšç¬¬äºŒé¢˜ï¼Œåšç¬¬ä¸‰é¢˜äº†ã€‚



## å”¯ä¸€ä¸­é—´ä¼—æ•°å­åºåˆ— I
### ç®—æ³•æ¦‚è¿°
æœ¬é¢˜è¦æ±‚ä¸ºæ±‚å‡ºæœ‰å¤šå°‘ä¸ªå”¯ä¸€ä¸­é—´ä¼—æ•°å­åºåˆ—ï¼ˆå­åºåˆ—ï¼šæŒ‡çš„æ˜¯å°†ä¸€ä¸ªæ•°ç»„åˆ é™¤ä¸€äº›ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼‰å…ƒç´ åï¼Œå‰©ä¸‹å…ƒç´ ä¸æ”¹å˜é¡ºåºå¾—åˆ°çš„éç©ºæ•°ç»„ï¼‰ï¼Œè§„å®šé•¿åº¦ä¸º5ã€‚å‚è€ƒçµç¥ï¼Œè¿™é“é¢˜åæ•°å­¦ã€‚
- æ—¶é—´å¤æ‚åº¦ä¸º$O(n^2)$
- ç©ºé—´å¤æ‚åº¦ä¸º$O(n)$

### JAVA
```java
class Solution {
    public int subsequencesWithMiddleMode(int[] nums) {
        int n = nums.length;
        long ans = (long) n * (n - 1) * (n - 2) * (n - 3) * (n - 4) / 120; // æ‰€æœ‰æ–¹æ¡ˆæ•°
        Map<Integer, Integer> suf = new HashMap<>();
        for (int x : nums) {
            suf.merge(x, 1, Integer::sum); // suf[x]++
        }
        Map<Integer, Integer> pre = new HashMap<>(suf.size()); // é¢„åˆ†é…ç©ºé—´
        // æšä¸¾ xï¼Œä½œä¸ºå­åºåˆ—æ­£ä¸­é—´çš„æ•°
        for (int left = 0; left < n - 2; left++) {
            int x = nums[left];
            suf.merge(x, -1, Integer::sum); // suf[x]--
            if (left > 1) {
                int right = n - 1 - left;
                int preX = pre.getOrDefault(x, 0);
                int sufX = suf.get(x);
                // ä¸åˆæ³•ï¼šåªæœ‰ä¸€ä¸ª x
                ans -= (long) comb2(left - preX) * comb2(right - sufX);
                // ä¸åˆæ³•ï¼šåªæœ‰ä¸¤ä¸ª xï¼Œä¸”è‡³å°‘æœ‰ä¸¤ä¸ª yï¼ˆy != xï¼‰
                for (Map.Entry<Integer, Integer> e : suf.entrySet()) {
                    int y = e.getKey();
                    if (y == x) {
                        continue;
                    }
                    int sufY = e.getValue(); // æ³¨æ„ sufY å¯èƒ½æ˜¯ 0
                    int preY = pre.getOrDefault(y, 0);
                    // å·¦è¾¹æœ‰ä¸¤ä¸ª yï¼Œå³è¾¹æœ‰ä¸€ä¸ª xï¼Œå³ yy x xzï¼ˆz å¯ä»¥ç­‰äº yï¼‰
                    ans -= (long) comb2(preY) * sufX * (right - sufX);
                    // å³è¾¹æœ‰ä¸¤ä¸ª yï¼Œå·¦è¾¹æœ‰ä¸€ä¸ª xï¼Œå³ zx x yyï¼ˆz å¯ä»¥ç­‰äº yï¼‰
                    ans -= (long) comb2(sufY) * preX * (left - preX);
                    // å·¦å³å„æœ‰ä¸€ä¸ª yï¼Œå¦ä¸€ä¸ª x åœ¨å·¦è¾¹ï¼Œå³ xy x yzï¼ˆz != yï¼‰
                    ans -= (long) preY * sufY * preX * (right - sufX - sufY);
                    // å·¦å³å„æœ‰ä¸€ä¸ª yï¼Œå¦ä¸€ä¸ª x åœ¨å³è¾¹ï¼Œå³ zy x xyï¼ˆz != yï¼‰
                    ans -= (long) preY * sufY * sufX * (left - preX - preY);
                }
            }
            pre.merge(x, 1, Integer::sum); // pre[x]++
        }
        return (int) (ans % 1_000_000_007);
    }

    private int comb2(int num) {
        return num * (num - 1) / 2;
    }
}
```

### æ€»ç»“
åé¢å†å›å¤´çœ‹ï¼Œè¿™é“é¢˜åæ•°å­¦ä¸åç®—æ³•ã€‚

